(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1c7d5364"],{"0610":function(e,t,a){var n=a("21e0"),r=a("7b58"),o="["+r+"]",s=RegExp("^"+o+o+"*"),i=RegExp(o+o+"*$"),d=function(e){return function(t){var a=String(n(t));return 1&e&&(a=a.replace(s,"")),2&e&&(a=a.replace(i,"")),a}};e.exports={start:d(1),end:d(2),trim:d(3)}},"17c9":function(e,t,a){var n=a("aad0"),r=a("7b58"),o="​᠎";e.exports=function(e){return n((function(){return!!r[e]()||o[e]()!=o||r[e].name!==e}))}},"5c59":function(e,t,a){"use strict";a("e80f")},"7b58":function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},a733:function(e,t,a){"use strict";var n=a("485e"),r=a("0610").trim,o=a("17c9");n({target:"String",proto:!0,forced:o("trim")},{trim:function(){return r(this)}})},e75a:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("Card",{staticStyle:{"margin-bottom":"10px"},attrs:{bordered:!1,"dis-hover":""}},[a("div",{staticClass:"category-btn-list"},[a("Form",{ref:"search",attrs:{model:e.managerData.search,"label-width":100}},[a("Row",[a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"关键字：",prop:"keys"}},[a("Input",{attrs:{type:"text",clearable:"",placeholder:"请输入关键字"},model:{value:e.managerData.search.keys,callback:function(t){e.$set(e.managerData.search,"keys",t)},expression:"managerData.search.keys"}})],1)],1),a("Col",{attrs:{span:"6"}},[a("FormItem",{attrs:{label:"状态：",prop:"status"}},[a("Select",{model:{value:e.managerData.search.status,callback:function(t){e.$set(e.managerData.search,"status",t)},expression:"managerData.search.status"}},[a("Option",{attrs:{value:""}},[e._v("全部")]),a("Option",{attrs:{value:"10"}},[e._v("已启用")]),a("Option",{attrs:{value:"9"}},[e._v("已禁用")])],1)],1)],1),a("Col",{attrs:{span:"8"}},[a("FormItem",[a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"primary"},on:{click:function(t){return e.searchClick("1")}}},[e._v("搜索")])],1),a("Col",{attrs:{span:"4"}},[a("Button",{attrs:{type:"default"},on:{click:function(t){return e.searchClick("2")}}},[e._v("重置")])],1)],1)],1)],1)],1)],1)]),a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("div",{staticClass:"category-btn-list"},[a("Button",{directives:[{name:"auth",rawName:"v-auth",value:"add_manager",expression:"`add_manager`"}],staticStyle:{"margin-right":"10px"},attrs:{type:"primary",icon:"md-add"},on:{click:function(t){return e.addModeShow(1)}}},[e._v("添加管理员")])],1),a("Table",{attrs:{border:!1,columns:e.managerData.columns,data:e.managerData.list,loading:e.managerData.loading},scopedSlots:e._u([{key:"role",fn:function(t){var n=t.row;t.index;return[1==n.roleType?a("div",[a("span",{staticStyle:{color:"#c5c8ce"}},[e._v("超级管理员无法操作")])]):a("div",[a("Select",{directives:[{name:"auth-select",rawName:"v-auth-select",value:"change_manager_role",expression:"`change_manager_role`"}],attrs:{transfer:""},model:{value:n.roleId,callback:function(t){e.$set(n,"roleId",t)},expression:"row.roleId"}},e._l(e.modeAdd.role.list,(function(t,n){return a("Option",{key:n,attrs:{value:t.id.toString(),label:t.name}},[a("span",[e._v(e._s(t.name))])])})),1)],1)]}},{key:"action",fn:function(t){var n=t.row,r=t.index;return[1==n.roleType?a("div",[a("span",{staticStyle:{color:"#c5c8ce"}},[e._v("超级管理员无法操作")])]):a("div",[a("Poptip",{directives:[{name:"auth",rawName:"v-auth",value:"edit_manager",expression:"`edit_manager`"}],attrs:{transfer:"",confirm:"",title:"确定重置此管理员的密码?"},on:{"on-ok":function(t){return e.setDefaultPass(n.id,r,1)}}},[a("span",{staticClass:"span-but-list"},[e._v("重置密码")])]),e._v(" | "),a("Poptip",{directives:[{name:"auth",rawName:"v-auth",value:"edit_manager",expression:"`edit_manager`"}],attrs:{transfer:""}},[a("a",[e._v("修改状态")]),a("div",{attrs:{slot:"content"},slot:"content"},[a("RadioGroup",{on:{"on-change":function(t){return e.setStatus(n.id,r,2,t)}},model:{value:e.modeAdd.formInline.status,callback:function(t){e.$set(e.modeAdd.formInline,"status",t)},expression:"modeAdd.formInline.status"}},[a("Radio",{attrs:{label:"10"}},[e._v("启用")]),a("Radio",{attrs:{label:"9"}},[e._v("禁用")])],1)],1)]),e._v(" | "),a("Poptip",{directives:[{name:"auth",rawName:"v-auth",value:"edit_manager",expression:"`edit_manager`"}],attrs:{transfer:"",confirm:"",title:"确定删除此管理员?"},on:{"on-ok":function(t){return e.deleteManager(n.id,r,3)}}},[a("span",{staticClass:"span-but-list"},[e._v("删除")])])],1)]}}])}),a("div",{staticClass:"page-box"},[a("Page",{attrs:{total:e.managerData.count,"show-elevator":"","show-sizer":"","show-total":""},on:{"on-change":e.managerPageChange,"on-page-size-change":e.managerPageSizeChange}})],1)],1),a("Modal",{attrs:{loading:e.modeAdd.loading,title:"添加管理员",closable:!1,"mask-closable":!1},on:{"on-ok":e.addMode},model:{value:e.modeAdd.show,callback:function(t){e.$set(e.modeAdd,"show",t)},expression:"modeAdd.show"}},[a("Form",{ref:"formValidate",attrs:{model:e.modeAdd.formInline,rules:e.modeAdd.ruleValidate,"label-width":95}},[a("FormItem",{attrs:{label:"登录名",prop:"username"}},[a("Input",{attrs:{type:"text",placeholder:"最多15个英文字符"},model:{value:e.modeAdd.formInline.username,callback:function(t){e.$set(e.modeAdd.formInline,"username",t)},expression:"modeAdd.formInline.username"}})],1),a("FormItem",{attrs:{label:"昵称",prop:"nickname"}},[a("Input",{attrs:{placeholder:"最多8个字符"},model:{value:e.modeAdd.formInline.nickname,callback:function(t){e.$set(e.modeAdd.formInline,"nickname",t)},expression:"modeAdd.formInline.nickname"}})],1),a("FormItem",{attrs:{label:"登录密码",prop:"password"}},[a("Input",{attrs:{type:"password",placeholder:"最多10个英文字符"},model:{value:e.modeAdd.formInline.password,callback:function(t){e.$set(e.modeAdd.formInline,"password",t)},expression:"modeAdd.formInline.password"}})],1),a("FormItem",{attrs:{label:"邮箱",prop:"email"}},[a("Input",{attrs:{type:"email",placeholder:"请输入邮箱地址"},model:{value:e.modeAdd.formInline.email,callback:function(t){e.$set(e.modeAdd.formInline,"email",t)},expression:"modeAdd.formInline.email"}})],1),a("FormItem",{attrs:{label:"备注",prop:"mark"}},[a("Input",{attrs:{type:"textarea",placeholder:"最多10个英文字符"},model:{value:e.modeAdd.formInline.mark,callback:function(t){e.$set(e.modeAdd.formInline,"mark",t)},expression:"modeAdd.formInline.mark"}})],1),a("FormItem",{attrs:{label:"所属角色",prop:"role"}},[a("Select",{model:{value:e.modeAdd.formInline.roleId,callback:function(t){e.$set(e.modeAdd.formInline,"roleId",t)},expression:"modeAdd.formInline.roleId"}},e._l(e.modeAdd.role.list,(function(t,n){return a("Option",{key:n,attrs:{value:t.id,label:t.name}},[a("span",[e._v(e._s(t.name))])])})),1)],1),a("FormItem",{attrs:{label:"状态",prop:"mode_status"}},[a("RadioGroup",{model:{value:e.modeAdd.formInline.status,callback:function(t){e.$set(e.modeAdd.formInline,"status",t)},expression:"modeAdd.formInline.status"}},[a("Radio",{attrs:{label:"10"}},[e._v("启用")]),a("Radio",{attrs:{label:"9"}},[e._v("禁用")])],1)],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{on:{click:function(t){return e.addModeShow(2)}}},[e._v("取消")]),a("Button",{attrs:{type:"primary",loading:e.modeAdd.loading},on:{click:function(t){return e.addMode("formValidate")}}},[e._v("确定")])],1)],1)],1)},r=[],o=(a("c368"),a("12ae"),a("a733"),{data:function(){var e=this,t=function(e,t,a){return""===t.trim()?a(new Error("请输入管理员登录名")):/[^\a-\z\A-\Z]/g.test(t)?a(new Error("管理员登录名必须为英文")):void a()};return{modeAdd:{show:!1,loading:!1,role:{count:0,list:[],search:{type:2,page:1,pageSize:this.COMMONJS.pageSize}},formInline:{username:"",nickname:"",password:"",email:"",mark:"",roleId:"",status:"10"},ruleValidate:{username:[{required:!0,message:"请输入管理员登录名",trigger:"blur"},{type:"string",max:10,message:"管理员登录名最多10个字符",trigger:"blur"},{min:4,message:"管理员登录名最少4个字符",trigger:"blur"},{required:!0,trigger:"blur",validator:t}],nickname:[{required:!0,message:"请输入管理员昵称",trigger:"blur"},{type:"string",max:8,message:"管理员昵称昵称最多为8个字符",trigger:"blur"}],email:[{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],password:[{required:!0,message:"请输入管理员登录密码",trigger:"blur"},{type:"string",min:6,message:"管理员密码不能少于为6个字符",trigger:"blur"},{type:"string",max:15,message:"管理员密码最多为15个字符",trigger:"blur"}],mark:[{type:"string",max:20,message:"管理员备注最多20个字符",trigger:"blur"}],roleId:[{type:"number",trigger:"change"},{required:!0,message:"请选择所属角色组",trigger:"blur",type:"number"}]}},managerData:{loading:!0,search:{page:1,keys:"",status:"",pageSize:this.COMMONJS.pageSize},count:0,list:[],columns:[{title:"ID",key:"id",width:100,align:"center"},{title:"用户名(登录名)",key:"username",width:200,align:"left"},{title:"所属角色",slot:"role",key:"roleId",width:200,align:"left"},{title:"最后登录IP",key:"last_ip",width:200,align:"left"},{title:"最后登录时间",key:"updated_at",width:200,align:"left",render:function(t,a){return t("div",e.dayjs.unix(a.row.updated_at).format("YYYY-MM-DD HH:mm:ss"))}},{title:"备注",key:"mark",width:200,align:"center"},{title:"状态",key:"status",width:200,align:"center",render:function(t,a){var n=e.managerData.list;return n[a.index].status==e.COMMONJS.managerActiveStatus?t("span",{style:{color:"#19be6b"}},"已启用"):t("span",{style:{color:"#ed4014"}},"已禁用")}},{title:"管理操作",slot:"action",align:"center",key:"action"}]}}},activated:function(){this.getUserList(),this.getRoleList()},methods:{rolePageChange:function(e){this.roleData.loading=!0,this.roleData.search.page=e,this.getRoleList()},getRoleList:function(){var e=this,t=function(t){e.modeAdd.role.list=t.data.data.list,e.modeAdd.role.count=t.data.data.count},a=function(t){e.modeAdd.role.list=[]};e.HTTPJS.get(e.HTTPURL.SYSTEM_SEETING.ROLE.GET_ROLE_LIST,e.modeAdd.role.search,t,a)},managerPageChange:function(e){this.managerData.loading=!0,this.managerData.search.page=e,this.getUserList()},managerPageSizeChange:function(e){this.managerData.loading=!0,this.managerData.search.pageSize=e,this.getUserList()},getUserList:function(){var e=this,t=function(t){e.managerData.loading=!1,e.managerData.count=t.data.data.count,e.managerData.list=t.data.data.list},a=function(t){e.managerData.loading=!1};e.HTTPJS.get(e.HTTPURL.SYSTEM_SEETING.MANAGER.GET_USER_LIST,e.managerData.search,t,a)},addModeShow:function(e){1==e?(this.modeAdd.show=!0,this.getRoleList()):(this.modeAdd.loading=!1,this.modeAdd.show=!1,this.$refs["formValidate"].resetFields())},addMode:function(e){var t=this;this.$refs[e].validate((function(e,a){if(e){t.modeAdd.loading=!0;var n=function(e){t.$Message.info({content:"添加成功",onClose:function(){t.getUserList(),t.modeAdd.loading=!1,t.addModeShow(2)}})},r=function(e){t.$Message.error({content:e.data.message,onClose:function(){t.modeAdd.loading=!1}})};t.HTTPJS.post(t.HTTPURL.SYSTEM_SEETING.MANAGER.ADD_MANAGER,t.modeAdd.formInline,n,r)}}))},setStatus:function(e,t,a,n){var r=this,o=function(e){r.$Message.info({content:e.data.message,onClose:function(){r.getUserList()}})},s=function(e){r.$Message.error({content:e.data.message})};r.HTTPJS.post(r.HTTPURL.SYSTEM_SEETING.MANAGER.EDIT_MANAGER,{editManagerId:e,editManagerType:a,editManagerValue:n},o,s)},setDefaultPass:function(e,t,a){var n=this,r=function(e){n.$Message.info({content:e.data.message})},o=function(e){n.$Message.error({content:e.data.message})};n.HTTPJS.post(n.HTTPURL.SYSTEM_SEETING.MANAGER.EDIT_MANAGER,{editManagerId:e,editManagerType:a,editManagerValue:""},r,o)},deleteManager:function(e,t,a){var n=this,r=function(e){n.$Message.info({content:"删除成功",onClose:function(){n.getUserList()}})},o=function(e){n.$Message.error({content:e.data.message})};n.HTTPJS.post(n.HTTPURL.SYSTEM_SEETING.MANAGER.EDIT_MANAGER,{editManagerId:e,editManagerType:a,editManagerValue:""},r,o)},searchClick:function(e){1==e?(this.managerData.search.page=1,this.managerData.list=[],this.managerData.loading=!0,this.getUserList()):(this.managerData.search.page=1,this.managerData.list=[],this.managerData.loading=!0,this.$refs["search"].resetFields(),this.getUserList())},changeMangerRole:function(e,t){var a=this;a.$Modal.confirm({title:"更管理员所属角色",content:"确定要更换此管理员所属角色吗？",loading:!0,onOk:function(){var n=function(e){a.$Message.info({content:e.data.message,onClose:function(){a.getUserList(),a.$Modal.remove()}})},r=function(e){a.$Message.error({content:e.data.message})};a.HTTPJS.post(a.HTTPURL.SYSTEM_SEETING.MANAGER.CHANGE_MANAGER_ROLE,{userId:e,roleId:t},n,r)}})}}}),s=o,i=(a("5c59"),a("c701")),d=Object(i["a"])(s,n,r,!1,null,"0c49439f",null);t["default"]=d.exports},e80f:function(e,t,a){}}]);
//# sourceMappingURL=chunk-1c7d5364.eacb29b9.js.map