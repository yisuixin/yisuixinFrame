(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5e3ecd62"],{"0fe8":function(t,e,o){"use strict";o("91f6")},"8d21":function(t,e,o){"use strict";o.r(e);var a=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",[o("Card",{staticStyle:{"margin-bottom":"10px"},attrs:{bordered:!1,"dis-hover":""}},[o("div",{staticClass:"category-btn-list"},[o("Form",{ref:"search",attrs:{model:t.operationLog.search,"label-width":100}},[o("Row",[o("Col",{attrs:{span:"5"}},[o("FormItem",{attrs:{label:"关键字：",prop:"searchKey"}},[o("Input",{attrs:{type:"text",placeholder:"请输入操作用户"},model:{value:t.operationLog.search.searchKey,callback:function(e){t.$set(t.operationLog.search,"searchKey",e)},expression:"operationLog.search.searchKey"}})],1)],1),o("Col",{attrs:{span:"5"}},[o("FormItem",{attrs:{label:"操作时间：",prop:"loginTime"}},[o("DatePicker",{staticStyle:{width:"100%"},attrs:{type:"daterange",placeholder:"请选择操作时间",editable:!1},on:{"on-change":t.selectLogDate},model:{value:t.operationLog.search.loginTime,callback:function(e){t.$set(t.operationLog.search,"loginTime",e)},expression:"operationLog.search.loginTime"}})],1)],1),o("Col",{attrs:{span:"5"}},[o("FormItem",{attrs:{label:"操作状态：",prop:"loginStatus"}},[o("Select",{attrs:{placeholder:"请选择操作状态"},model:{value:t.operationLog.search.status,callback:function(e){t.$set(t.operationLog.search,"status",e)},expression:"operationLog.search.status"}},[o("Option",{attrs:{value:""}},[t._v("全部")]),o("Option",{attrs:{value:"1"}},[t._v("操作成功")]),o("Option",{attrs:{value:"0"}},[t._v("操作失败")])],1)],1)],1),o("Col",{attrs:{span:"8"}},[o("FormItem",[o("Col",{attrs:{span:"4"}},[o("Button",{attrs:{type:"primary"},on:{click:function(e){return t.handleSubmit(1)}}},[t._v("搜索")])],1),o("Col",{attrs:{span:"4"}},[o("Button",{attrs:{type:"default"},on:{click:function(e){return t.handleSubmit(2)}}},[t._v("重置")])],1)],1)],1)],1)],1)],1)]),o("Card",{attrs:{bordered:!1,"dis-hover":""}},[o("Table",{attrs:{border:!1,columns:t.operationLog.columns,data:t.operationLog.list,loading:t.operationLog.loading},scopedSlots:t._u([{key:"action",fn:function(e){var a=e.row,n=e.index;return[o("Poptip",{directives:[{name:"auth",rawName:"v-auth",value:"edit_manager",expression:"`edit_manager`"}],attrs:{transfer:"",confirm:"",title:"确定删除此操作日志?"},on:{"on-ok":function(e){return t.deleteOperationLog(a.id,n,3)}}},[o("Button",{attrs:{type:"error",size:"small"}},[t._v("删除")])],1)]}}])}),o("div",{staticClass:"page-box"},[o("Page",{attrs:{total:t.operationLog.count,"show-elevator":"","show-total":"","page-size":t.operationLog.search.pageSize},on:{"on-change":t.loginLogPageChange,"on-page-size-change":t.loginLogPageSizeChange}})],1)],1)],1)},n=[],i=(o("c368"),o("12ae"),{data:function(){var t=this;return{operationLog:{loading:!0,search:{status:"",page:1,searchKey:"",pageSize:this.COMMONJS.pageSize,startTime:"",endTime:""},count:0,list:[],columns:[{title:"ID",key:"id",width:80,align:"center",sortable:!0},{title:"操作用户",key:"userName",width:150,align:"center",render:function(e,o){var a=t.operationLog.list[o.index].user;return e("span",a.username)}},{title:"操作URL",key:"url",width:300,align:"left"},{title:"操作备注",key:"mark",width:450,align:"left",render:function(e,o){var a=t.operationLog.list[o.index].desc;return e("span","请求方式："+a.type+";模块："+a.model+";控制器："+a.controller+";方法："+a.action+";操作提示："+a.message)}},{title:"操作IP",key:"ip",width:120,align:"left"},{title:"操作时间",key:"loginTime",width:250,align:"center",sortable:!0,render:function(e,o){var a=t.operationLog.list[o.index].created_at;return e("span",t.$options.filters.formatTime10(a))}},{title:"操作状态",key:"status",width:120,align:"center",render:function(e,o){var a=t.operationLog.list;return 1==a[o.index].status?e("Tag",{props:{color:"success"}},"操作成功"):e("Tag",{props:{color:"error"}},"操作失败")}},{title:"管理操作",slot:"action",align:"center",key:"action",directives:[{name:"auth",value:"del_operation_log"}]}]}}},activated:function(){this.getOperationLog()},methods:{selectLogDate:function(t){this.operationLog.search.startTime=t[0],this.operationLog.search.endTime=t[1]},loginLogPageChange:function(t){this.operationLog.loading=!0,this.operationLog.search.page=t,this.getOperationLog()},loginLogPageSizeChange:function(t){this.operationLog.loading=!0,this.operationLog.search.pageSize=t,this.getOperationLog()},getOperationLog:function(){var t=this,e=function(e){t.operationLog.loading=!1,t.operationLog.list=e.data.data.list,t.operationLog.count=e.data.data.count},o=function(e){t.operationLog.loading=!1,t.operationLog.list=[]},a=function(e){t.operationLog.loading=!1,t.operationLog.list=[]};t.HTTPJS.get(t.HTTPURL.SYSTEM_SEETING.LOG.OPERATION_LOG,t.operationLog.search,e,o,a)},handleSubmit:function(t){1==t?this.getOperationLog():this.$refs["search"].resetFields()},deleteOperationLog:function(t,e){var o=this,a=function(t){o.$Message.info({content:"删除成功",onClose:function(){o.getOperationLog()}})},n=function(t){o.$Message.error({content:t.data.message})};o.HTTPJS.post(o.HTTPURL.SYSTEM_SEETING.LOG.OPERATION_LOG_DEL,{id:t},a,n)}}}),r=i,s=(o("0fe8"),o("c701")),l=Object(s["a"])(r,a,n,!1,null,"2fef58a1",null);e["default"]=l.exports},"91f6":function(t,e,o){}}]);
//# sourceMappingURL=chunk-5e3ecd62.69b1281c.js.map