(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-eec34462"],{"02be":function(e,t,a){},"10f5":function(e,t,a){"use strict";a("a0a4")},"50e2":function(e,t,a){"use strict";a("02be")},a0a4:function(e,t,a){},fe20:function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("Card",{attrs:{bordered:!1,"dis-hover":""}},[a("p",{attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"md-options"}}),e._v(" 基本信息 ")],1),a("Form",{ref:"formInline",attrs:{model:e.formInline,rules:e.ruleInline,"label-position":"top"}},[a("Row",{attrs:{gutter:10}},[a("Col",{attrs:{span:"9"}},[a("FormItem",{attrs:{prop:"username",label:"用户名(登录名)"}},[a("Input",{staticStyle:{width:"550px"},attrs:{type:"text",disabled:""},model:{value:e.formInline.username,callback:function(t){e.$set(e.formInline,"username",t)},expression:"formInline.username"}})],1),a("FormItem",{attrs:{prop:"nickname",label:"昵称"}},[a("Input",{staticStyle:{width:"550px"},attrs:{type:"text",placeholder:"请输入昵称"},model:{value:e.formInline.nickname,callback:function(t){e.$set(e.formInline,"nickname",t)},expression:"formInline.nickname"}})],1),a("FormItem",{attrs:{prop:"email",label:"邮箱"}},[a("Input",{staticStyle:{width:"550px"},attrs:{type:"text",placeholder:"请输入邮箱"},model:{value:e.formInline.email,callback:function(t){e.$set(e.formInline,"email",t)},expression:"formInline.email"}})],1),a("FormItem",{attrs:{prop:"mark",label:"个人介绍"}},[a("Input",{staticStyle:{width:"550px"},attrs:{type:"textarea",placeholder:"请输入个人介绍"},model:{value:e.formInline.mark,callback:function(t){e.$set(e.formInline,"mark",t)},expression:"formInline.mark"}})],1),a("FormItem",[a("Button",{attrs:{type:"primary",loading:e.editBasic.loading},on:{click:function(t){return e.handleSubmit("formInline")}}},[e._v(e._s(e.editBasic.txt))])],1)],1),a("Col",{attrs:{span:"15"}},[a("FormItem",{attrs:{prop:"avatar",label:"头像"}},[a("div",{attrs:{slot:"label"},slot:"label"},[a("Poptip",{attrs:{trigger:"hover","word-wrap":"",width:"200",content:"只能上传jpg、jpeg、png格式;大小不能超过2M",transfer:!0}},[a("Icon",{attrs:{type:"ios-alert-outline"}})],1),a("span",[e._v(" 头像")])],1),a("UploadOneImg",{attrs:{img:e.formInline.avatar},on:{uploadImg:e.uploadImg}})],1)],1)],1)],1)],1)},r=[],i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"upload-pic"},[""!=e.imgUrl?a("div",{staticClass:"demo-upload-list"},[[a("img",{attrs:{src:e.imgUrl}}),a("div",{staticClass:"demo-upload-list-cover"},[a("Icon",{attrs:{type:"ios-eye-outline"},nativeOn:{click:function(t){return e.handleView()}}})],1)]],2):[a("Avatar",{staticStyle:{"margin-bottom":"20px"},attrs:{shape:"square",icon:"ios-person",size:"90",src:e.imgUrl}})],a("Upload",{attrs:{"show-upload-list":!1,format:["jpg","jpeg","png"],"max-size":2097152,action:e.postUrl,headers:e.requestHeader,"on-success":e.uploadSuccess,"on-format-error":e.formatError,"on-exceeded-size":e.exceededSizeError}},[a("Button",{attrs:{icon:"md-camera"}},[e._v("修改头像")])],1),a("Modal",{attrs:{title:"查看头像",draggable:!0,"footer-hide":!0},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.visible?a("img",{staticStyle:{width:"100%"},attrs:{src:e.imgUrl}}):e._e()])],2)},s=[],o={name:"UploadOneImg",props:{img:{type:String,default:""}},data:function(){return{requestHeader:"",imgUrl:"",visible:!1,postUrl:"api"+this.HTTPURL.COMMON.UPLOAD.UPLOAD_ONE_IMG}},watch:{img:function(){this.imgUrl=this.img}},mounted:function(){},created:function(){this.requestHeader={Authorization:"Bearer "+sessionStorage.getItem("token")}},methods:{uploadSuccess:function(e,t,a){var n=this;200==e.code&&(1==e.data.status?n.$Message.success({content:"上传成功",onClose:function(){n.imgUrl=e.data.data,n.$emit("uploadImg",e.data.data)}}):n.$Message.error({content:e.data.message}))},handleView:function(){this.visible=!0},formatError:function(){this.$Message.error({content:"只能上传jpeg、png、jpg格式"})},exceededSizeError:function(){this.$Message.error({content:"只能上传不大于2M的图片"})}}},l=o,c=(a("10f5"),a("c701")),m=Object(c["a"])(l,i,s,!1,null,null,null),u=m.exports,d={components:{UploadOneImg:u},data:function(){return{editBasic:{loading:!1,txt:"更新信息"},formInline:{username:"",nickname:"",email:"",mark:"",avatar:""},ruleInline:{nickname:[{required:!0,message:"请输入昵称",trigger:"blur"},{type:"string",max:8,message:"昵称最多为8个字符",trigger:"blur"}],email:[{required:!0,message:"请输入邮箱地址",trigger:"blur"},{type:"email",message:"邮箱地址格式错误",trigger:"blur"}],mark:[{type:"string",max:30,message:"个人描述最多30个字符",trigger:"blur"}]}}},activated:function(){this.getUserInfo()},methods:{uploadImg:function(e){this.formInline.avatar=e},getUserInfo:function(){var e=this,t=function(t){e.formInline=t.data.data};e.HTTPJS.get(e.HTTPURL.COMMON.ACCOUNT.GET_USER_INFO,{},t)},handleSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(e){t.editBasic.txt="正在修改信息...",t.editBasic.loading=!0;var a=function(e){t.$Message.info({content:"修改成功",onClose:function(){t.editBasic.loading=!1,t.editBasic.txt="更新信息",sessionStorage.setItem("userInfo",JSON.stringify(e.data.data))}})},n=function(e){t.$Message.error({content:e.data.message,onClose:function(){t.editBasic.loading=!1,t.editBasic.txt="更新信息"}})};t.HTTPJS.post(t.HTTPURL.COMMON.ACCOUNT.EDIT_USER_INFO,t.formInline,a,n)}}))}}},p=d,f=(a("50e2"),Object(c["a"])(p,n,r,!1,null,"e59f07c4",null));t["default"]=f.exports}}]);
//# sourceMappingURL=chunk-eec34462.14d28129.js.map